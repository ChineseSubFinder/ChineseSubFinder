# 关于字幕名称命名格式说明

根据网友给出的资料，目前有几款媒体工具支持的字幕名称格式如下：

* [Emby](https://support.emby.media/support/solutions/articles/44001159160-subtitles%EF%BC%8C)
* [Jellyfin](https://jellyfin.org/docs/general/server/media/subtitles.html)
* [Plex](https://support.plex.tv/articles/200471133-adding-local-subtitles-to-your-media/)

可见，Emby 相对来说可操作性更大，更加灵活。本程序默认的字幕名称格式就是 Emby。

Jellyfin 和 Plex 基本可以理解为就是支持最常见的字幕命名格式。

## 支持字幕命名格式的转换

从 v0.14.x （在此之前的都是默认 Emby 的格式）开始，将支持切换字幕名称格式模式，以应对 Jellyfin 和 Plex 和其他媒体工具识别字幕的问题。

在 config.yaml 中，将新增一个字段 SubNameFormatter。

```yaml
UseProxy: true
HttpProxy: http:/127.0.0.1:10809
EveryTime: 12h
Threads: 1
SubNameFormatter: 0
```

SubNameFormatter 字幕命名格式（默认不填写或者超出范围，则为 Emby 格式，为了兼容以前的版本）：

* 0，Emby 支持的的格式（AAA.chinese(简英,subhd).ass or AAA.chinese(简英,xunlei).default.ass）
* 1，常规格式（兼容性更好，AAA.zh.ass or AAA.zh.default.ass）

> 因为考虑到了 Plex 不支持 Default 字段，所以其实“常规格式0”，是不会添加 Default 字段的。

每次软件重启后，会自动判断是否需要将所有扫描到的字幕从 Emby 转为 Normal，或者反过来。

> 不会每次都全扫描处理一次，会有标记，第一次使用的时候会全字幕扫描处理一次，完成后，如果不改 SubNameFormatter 的配置或者清理缓存用的数据库（settings.db），是不会真正启动这个逻辑的。

> 考虑到可能出现的后续需要支持的字幕命名格式问题，针对该功能进行了比较大的重构，应该可以比较块的进行支持。有需求的请提 issue，最好能给出字幕命名格式的文档和示例。

## 支持的中文缩写

参考 [wiki](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)

| 缩写 | ISO-    |
| ---- | ------- |
| zh   | 639-1   |
| zho  | 639-2/T |
| chi  | 639-2/B |

因为本工具面向的是中文群体，所以其他语言的缩写默认是不处理的。
